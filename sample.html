<html>
<head>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
<div id="viz">
</div>

<script>
var a={"source":{"x":150, "y":20}, "target":{"x":40,"y":180}};
var b={"source":{"x":150, "y":20}, "target":{"x":57,"y":180}};


var g={"source":{"x":150, "y":20}, "target":{"x":224,"y":180}};
var h={"source":{"x":150, "y":20}, "target":{"x":240,"y":180}};

var e={"source":{"x":160, "y":20}, "target":{"x":412,"y":180}};
var f={"source":{"x":160, "y":20}, "target":{"x":426,"y":180}};


var dl={"source":{"x":48, "y":206}, "target":{"x":232,"y":206}};
var dl2={"source":{"x":48, "y":206}, "target":{"x":418,"y":206}};
var dl3={"source":{"x":232, "y":206}, "target":{"x":418,"y":206}};


var svg = d3.select("#viz")
        .append("svg")
        .attr("width", 600)
        .attr("height", 600);



svg.append("path")
        .style("stroke", "#efce47")
        .style("stroke-width", "20")
        .attr("fill","none")
        .attr("d",link(a));

svg.append("path")
        .style("stroke", "#efce47")
        .style("stroke-width", "4")
        .attr("fill","none")
        .attr("d",link(b));



svg.append("line")
.style("stroke", "#bbb")
.style("stroke-width", "10")
.attr("x1", 48)
.attr("y1", 201)
.attr("x2", 48+80*0.77)
.attr("y2", 201-80*0.77)
.attr("marker-end","url(#pointer2)");

svg.append("line")
.style("stroke", "#bbb")
.style("stroke-width", "4")
.attr("x1", 48)
.attr("y1", 212)
.attr("x2", 48+80*0.77)
.attr("y2", 212-80*0.77).attr("marker-end","url(#pointer2)");

svg.append("path")
        .style("stroke", "#efce47")
        .style("stroke-width", "20")
        .attr("fill","none")
        .attr("d",link(g));

svg.append("path")
        .style("stroke", "#efce47")
        .style("stroke-width", "4")
        .attr("fill","none")
        .attr("d",link(h));



svg.append("line")
.style("stroke", "#bbb")
.style("stroke-width", "6")
.attr("x1", 232)
.attr("y1", 203)
.attr("x2", 232+80*0.77)
.attr("y2", 203-80*0.77)
.attr("marker-end","url(#pointer2)");

svg.append("line")
.style("stroke", "#bbb")
.style("stroke-width", "1")
.attr("x1", 232)
.attr("y1", 210)
.attr("x2", 232+80*0.77)
.attr("y2", 210-80*0.77)
.attr("marker-end","url(#pointer2)");


svg.append("path")
        .style("stroke", "#efce47")
        .style("stroke-width", "12")
        .attr("fill","none")
        .attr("d",link(e));

svg.append("path")
        .style("stroke", "#efce47")
        .style("stroke-width", "3")
        .attr("fill","none")
        .attr("d",link(f));

svg.append("line")
.style("stroke", "#bbb")
.style("stroke-width", "4")
.attr("x1", 416)
.attr("y1", 203)
.attr("x2", 416+80*0.77)
.attr("y2", 203-80*0.77)
.attr("marker-end","url(#pointer2)");

svg.append("line")
.style("stroke", "#bbb")
.style("stroke-width", "1")
.attr("x1", 416)
.attr("y1", 208)
.attr("x2", 416+80*0.77)
.attr("y2", 208-80*0.77).attr("marker-end","url(#pointer2)");


svg.append("path")
        .style("stroke", "gray")
        .style("stroke-width", "8")
        .attr("fill","none")
        .attr("d",dirlink(dl))
        .attr("marker-end","url(#pointer)");

svg.append("path")
        .style("stroke", "gray")
        .style("stroke-width", "8")
        .attr("fill","none")
        .attr("d",dirlink(dl2))
        .attr("marker-end","url(#pointer)");

svg.append("path")
        .style("stroke", "gray")
        .style("stroke-width", "8")
        .attr("fill","none")
        .attr("d",dirlink(dl3))
        .attr("marker-end","url(#pointer)");


svg.append("circle")
        .style("stroke", "gray")
        .style("stroke-width", "3")
        .style("fill", "white")
        .attr("r", 40)
        .attr("cx", 48)
        .attr("cy", 206)

svg.append("circle")
        .style("stroke", "#eee")
        .style("stroke-width", "1")
        .style("fill", "white")
        .attr("r", 30)
        .attr("cx", 48)
        .attr("cy", 206)

svg.append("circle")
        .style("stroke", "#eee")
        .style("stroke-width", "1")
        .style("fill", "none")
        .attr("r", 16)
        .attr("cx", 48)
        .attr("cy", 206)

arc=d3.svg.arc()
    .innerRadius(30)
    .outerRadius(39)
    .startAngle(-3.5/2) //converting from degs to radians
    .endAngle(3.5/2);

arc2=d3.svg.arc()
    .innerRadius(30)
    .outerRadius(39)
    .startAngle(-1.5/2) //converting from degs to radians
    .endAngle(1.5/2);

arc3=d3.svg.arc()
    .innerRadius(30)
    .outerRadius(39)
    .startAngle(-0.8/2) //converting from degs to radians
    .endAngle(0.8/2);


stock=d3.svg.arc()
    .innerRadius(0)
    .outerRadius(16)
    .startAngle(-4.7/2) //converting from degs to radians
    .endAngle(4.7/2);

stock2=d3.svg.arc()
    .innerRadius(0)
    .outerRadius(16)
    .startAngle(-0.7/2) //converting from degs to radians
    .endAngle(0.7/2);

stock3=d3.svg.arc()
    .innerRadius(0)
    .outerRadius(16)
    .startAngle(-0.5/2) //converting from degs to radians
    .endAngle(0.5/2);

svg.append("path")
.attr("d", arc)
    .attr("transform", "translate(48,206)")
    .style("fill","#62ad6b")

svg.append("path")
.attr("d", stock)
    .attr("transform", "translate(48,206)")
    .style("fill","gray")

svg.append("circle")
        .style("stroke", "gray")
        .style("stroke-width", "3")
        .style("fill", "white")
        .attr("r", 40)
        .attr("cx", 232)
        .attr("cy", 206)

svg.append("circle")
        .style("stroke", "#eee")
        .style("stroke-width", "1")
        .style("fill", "white")
        .attr("r", 30)
        .attr("cx", 232)
        .attr("cy", 206)

svg.append("circle")
        .style("stroke", "#eee")
        .style("stroke-width", "1")
        .style("fill", "none")
        .attr("r", 16)
        .attr("cx", 232)
        .attr("cy", 206)


svg.append("path")
.attr("d", arc2)
    .attr("transform", "translate(232,206)")
    .style("fill","#62ad6b")

svg.append("path")
.attr("d", stock2)
    .attr("transform", "translate(232,206)")
    .style("fill","gray")

//svg.append("circle")
//        .style("fill", "#fc9d05")
//        .attr("r", 10)
//        .attr("cx", 90)
//        .attr("cy", 10)
svg.append("circle")
        .style("stroke", "gray")
        .style("stroke-width", "3")
        .style("fill", "white")
        .attr("r", 40)
        .attr("cx", 416)
        .attr("cy", 206);

svg.append("circle")
        .style("stroke", "#eee")
        .style("stroke-width", "1")
        .style("fill", "white")
        .attr("r", 30)
        .attr("cx", 416)
        .attr("cy", 206)

svg.append("path")
.attr("d", arc3)
    .attr("transform", "translate(416,206)")
    .style("fill","#62ad6b")

svg.append("path")
.attr("d", stock3)
    .attr("transform", "translate(416,206)")
    .style("fill","gray")





svg.append("circle")
        .style("stroke", "#eee")
        .style("stroke-width", "1")
        .style("fill", "none")
        .attr("r", 16)
        .attr("cx", 416)
        .attr("cy", 206)

function link(d) {
      var x0 = d.source.x,
          x1 = d.target.x,
          y0 = d.source.y,
          y1 = d.target.y,
          yi = d3.interpolateNumber(y0, y1),
          y2 = yi(.5),
          y3 = yi(1 - .5);
          
      return "M" + x0 + "," + y0
           + "C" + x0 + "," + y2
           + " " + x1 + "," + y3
           + " " + x1 + "," + y1;
    }

function dirlink(d) {
      var x0 = d.source.x,
          x1 = d.target.x-50*0.86,
          y0 = d.source.y,
          y1 = d.target.y+50*0.5,
          xi = d3.interpolateNumber(x0, x1),
          x2 = xi(.5);
          
          
      return "M" + x0 + "," + y0
           + "Q" + x2 + "," + parseInt(y0+(x1-x0)*0.5)
           + " " + x1 + "," + y1;
    }

function straightlink(d) {
      var x0 = d.source.x,
          x1 = d.target.x-50,
          y0 = d.source.y,
          y1 = d.target.y;
          
          
      return "M" + x0 + "," + y0
           + "L" + x1 + "," + y1;
    }

svg.append("svg:defs")
    .append("svg:marker")
    .attr("id", "pointer")
    .attr("viewBox", "0 -5 10 10")
    .style("fill","gray")
    .attr("refX", 1)
    .attr("refY", 0)
    .attr("markerWidth", 1)
    .attr("markerHeight", 3)
    .attr("orient", "auto")
  .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5");


svg.append("svg:defs")
    .append("svg:marker")
    .attr("id", "pointer2")
    .attr("viewBox", "0 -5 10 10")
    .style("fill","#bbb")
    .attr("refX", 0)
    .attr("refY", 0)
    .attr("markerWidth", 1)
    .attr("markerHeight", 3)
    .attr("orient", "auto")
  .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5");
</script>
</body>
</html>